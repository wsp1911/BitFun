/**
 * First-run onboarding wizard styles
 * BEM naming + design tokens
 * Dashed/solid style inspired by the Git panel
 */

@use '../../../component-library/styles/tokens' as *;

// ==================== Root container ====================
.bitfun-onboarding {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: $z-fullscreen;
  display: flex;
  flex-direction: column;
  background: var(--color-bg-primary);
  color: var(--color-text-primary);
  font-family: $font-family-sans;
  overflow: hidden;

  // ==================== Background decoration ====================
  &__background {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    overflow: hidden;
    z-index: 0;
  }

  // ==================== Window controls ====================
  &__window-controls {
    position: absolute;
    top: $size-gap-4;
    right: $size-gap-4;
    z-index: 10;
    pointer-events: auto;
  }


  // ==================== Main content ====================
  &__content {
    position: relative;
    z-index: 1;
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: $size-gap-8;
    overflow-y: auto;
    min-height: 0;
  }

  // ==================== Step container ====================
  &__step-container {
    width: 100%;
    max-width: 720px;
    animation: onboarding-fade-in 0.4s ease-out;
  }

  // ==================== Progress indicator ====================
  &__progress {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $size-gap-2;
    padding: $size-gap-4 $size-gap-6;
    background: transparent;
  }

  &__progress-step {
    display: flex;
    align-items: center;
    gap: $size-gap-2;
    padding: $size-gap-1 $size-gap-2;
    border-radius: $size-radius-base;

    &--active {
      background: var(--element-bg-subtle);
      box-shadow: 0 0 0 1px var(--border-medium);
    }

    &--clickable {
      cursor: pointer;
      transition: background $motion-base $easing-standard;

      &:hover {
        background: var(--element-bg-subtle);
      }

      &:focus {
        outline: none;
        background: var(--element-bg-subtle);
      }
    }
  }

  &__progress-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    border: 1px dashed var(--border-medium);
    background: transparent;
    transition: all $motion-base $easing-standard;

    &--active {
      border-style: solid;
      border-color: $color-accent-500;
      background: $color-accent-500;
      box-shadow: 0 0 8px $color-accent-400;
    }

    &--completed {
      border-style: solid;
      border-color: $color-success;
      background: $color-success;
    }
  }

  &__progress-line {
    width: 40px;
    height: 1px;
    background: repeating-linear-gradient(
      90deg,
      var(--border-medium) 0,
      var(--border-medium) 4px,
      transparent 4px,
      transparent 8px
    );

    &--completed {
      background: $color-success;
    }
  }

  &__progress-label {
    font-size: $font-size-xs;
    color: var(--color-text-muted);
    white-space: nowrap;

    &--active {
      color: $color-accent-500;
      font-weight: $font-weight-medium;
    }

    &--completed {
      color: $color-success;
    }
  }

  // ==================== Navigation buttons ====================
  &__navigation {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: $size-gap-4;
    padding: $size-gap-4 $size-gap-6;
    border-top: 1px dashed var(--border-medium);
  }

  &__nav-info {
    font-size: $font-size-sm;
    color: var(--color-text-muted);
  }

  &__nav-buttons {
    display: flex;
    gap: $size-gap-3;
  }

  &__nav-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $size-gap-2;
    min-height: 40px;
    padding: 8px 16px;
    min-width: 100px;
    border: 1px dashed var(--border-medium);
    border-radius: var(--size-radius-base, 8px);
    background: transparent;
    color: var(--color-text-secondary);
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    font-family: $font-family-sans;
    cursor: pointer;
    box-sizing: border-box;
    transition: all $motion-base $easing-standard;

    &:hover:not(:disabled) {
      border-style: solid;
      border-color: var(--color-text-secondary);
      background: var(--element-bg-subtle);
      color: var(--color-text-primary);
    }

    &:active:not(:disabled) {
      transform: scale(0.98);
    }

    &:disabled {
      opacity: 0.4;
      cursor: default;
    }

    &--primary {
      border-color: $color-accent-500;
      border-style: solid;
      background: $color-accent-100;
      color: $color-accent-500;

      &:hover:not(:disabled) {
        background: $color-accent-200;
        border-color: $color-accent-600;
        color: $color-accent-600;
      }
    }

    &--skip {
      border: none;
      background: transparent;
      color: var(--color-text-muted);
      min-width: auto;

      &:hover:not(:disabled) {
        color: var(--color-text-secondary);
        background: transparent;
      }
    }
  }
}

// ==================== Common step styles ====================
.bitfun-onboarding-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  
  &__header {
    margin-bottom: $size-gap-6;
  }

  &__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 64px;
    height: 64px;
    margin: 0 auto $size-gap-4;
    border-radius: 50%;
    background: var(--element-bg-subtle);
    color: $color-accent-500;

    svg {
      width: 32px;
      height: 32px;
    }
  }

  &__title {
    font-size: $font-size-3xl;
    font-weight: $font-weight-semibold;
    color: var(--color-text-primary);
    margin: 0 0 $size-gap-2 0;
    line-height: 1.2;
  }

  &__subtitle {
    font-size: $font-size-lg;
    color: var(--color-text-secondary);
    margin: 0 0 $size-gap-2 0;
    line-height: 1.4;
  }

  &__description {
    font-size: $font-size-sm;
    color: var(--color-text-muted);
    margin: 0;
    max-width: 480px;
    line-height: 1.6;
  }

  &__content {
    width: 100%;
    margin-top: $size-gap-6;
  }
}

// ==================== Welcome step styles ====================
.bitfun-onboarding-welcome {
  &__logo {
    width: 100px;
    height: 100px;
    margin-bottom: $size-gap-10; // Increase spacing below
    margin-top: -$size-gap-8; // Move the cube upward
    animation: onboarding-float 3s ease-in-out infinite;
  }

  &__pillars {
    display: flex;
    gap: $size-gap-4;
    margin-top: $size-gap-8;
    width: 100%;
    max-width: 640px;
  }

  &__pillar {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: $size-gap-2;
    padding: $size-gap-4;
    border: 1px dashed var(--border-medium);
    border-radius: $size-radius-lg;
    background: transparent;
    transition: all $motion-base $easing-standard;

    &:hover {
      border-style: solid;
      background: var(--element-bg-subtle);
      transform: translateY(-2px);
    }
  }

  &__pillar-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: var(--element-bg-base);
    color: $color-accent-500;

    svg {
      width: 24px;
      height: 24px;
    }
  }

  &__pillar-title {
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    color: var(--color-text-primary);
  }

  &__pillar-desc {
    font-size: $font-size-xs;
    color: var(--color-text-muted);
  }

  &__actions {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: $size-gap-3;
    margin-top: $size-gap-8;
  }

  &__start-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $size-gap-2;
    padding: $size-gap-3 $size-gap-6;
    border: 1px dashed var(--border-medium);
    border-radius: $size-radius-base;
    background: transparent;
    color: var(--color-text-secondary);
    font-size: $font-size-base;
    font-weight: $font-weight-medium;
    font-family: $font-family-sans;
    cursor: pointer;
    transition: all $motion-base $easing-standard;

    &:hover {
      border-style: solid;
      border-color: var(--color-text-primary);
      background: var(--element-bg-subtle);
      color: var(--color-text-primary);
      transform: translateY(-2px);
    }

    &:active {
      transform: translateY(0);
    }

    svg {
      transition: transform $motion-base $easing-standard;
    }

    &:hover svg {
      transform: translateX(4px);
    }
  }

  &__skip-btn {
    background: transparent;
    border: none;
    color: var(--color-text-muted);
    font-size: $font-size-sm;
    cursor: pointer;
    transition: color $motion-base $easing-standard;

    &:hover {
      color: var(--color-text-secondary);
    }
  }
}

// ==================== Language selection styles ====================
.bitfun-onboarding-language {
  &__logo {
    width: 140px;
    height: 140px;
    margin: 0 auto $size-gap-4;

    img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  }

  &__welcome {
    font-size: 28px;
    font-weight: $font-weight-medium;
    color: var(--color-text-secondary);
    margin: 0 0 $size-gap-2 0;
    text-align: center;
    line-height: 1.2;
  }

  &__subtitle {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: $font-size-2xl;
    font-weight: $font-weight-semibold;
    color: var(--color-text-primary);
    margin: $size-gap-4 0 $size-gap-6 0;
    text-align: center;
    line-height: 1.6;
  }

  &__options {
    display: flex;
    gap: $size-gap-4;
    justify-content: center;
    margin-top: $size-gap-6;
  }

  &__option {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: $size-gap-3;
    padding: $size-gap-6 $size-gap-8;
    min-width: 180px;
    border: 1px dashed var(--border-medium);
    border-radius: $size-radius-lg;
    background: transparent;
    cursor: pointer;
    transition: all $motion-base $easing-standard;

    &:hover {
      border-style: solid;
      border-color: var(--color-text-secondary);
      background: var(--element-bg-subtle);
      transform: translateY(-2px);
    }

    &--selected {
      border-style: solid;
      border-color: $color-accent-500;
      background: $color-accent-50;

      .bitfun-onboarding-language__option-icon {
        background: $color-accent-500;
        color: white;
      }
    }
  }

  &__option-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: var(--element-bg-base);
    font-size: $font-size-2xl;
    transition: all $motion-base $easing-standard;
  }

  &__option-label {
    font-size: $font-size-lg;
    font-weight: $font-weight-medium;
    color: var(--color-text-primary);
  }
}

// ==================== Theme selection styles ====================
.bitfun-onboarding-theme {
  &__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: $size-gap-3;
    margin-top: $size-gap-6;
    width: 100%;
    max-width: 800px;
  }

  &__card {
    display: flex;
    flex-direction: column;
    padding: $size-gap-2;
    border: 1px dashed var(--border-medium);
    border-radius: $size-radius-lg;
    background: transparent;
    cursor: pointer;
    transition: all $motion-base $easing-standard;

    &:hover {
      border-style: solid;
      border-color: var(--color-text-secondary);
      background: var(--element-bg-subtle);
      transform: translateY(-2px);
    }

    &--selected {
      border-style: solid;
      border-color: $color-accent-500;
      background: $color-accent-50;
    }
  }

  &__info {
    padding: $size-gap-2 $size-gap-1 0;
  }

  // Theme preview thumbnail - realistic IDE mock
  &__preview-thumbnail {
    height: 100px;
    border-radius: $size-radius-base;
    border: 1px solid;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  &__preview-titlebar {
    height: 14px;
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 0 4px;
    border-bottom: 1px solid;
    flex-shrink: 0;
  }

  &__preview-dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    opacity: 0.8;
  }

  &__preview-title {
    font-size: 6px;
    margin-left: auto;
    opacity: 0.6;
  }

  &__preview-main {
    flex: 1;
    display: flex;
    overflow: hidden;
  }

  &__preview-sidebar {
    width: 20%;
    padding: 3px;
    border-right: 1px solid;
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  &__preview-tree-item {
    display: flex;
    align-items: center;
    gap: 2px;
  }

  &__preview-folder,
  &__preview-file {
    width: 4px;
    height: 4px;
    border-radius: 1px;
    flex-shrink: 0;
  }

  &__preview-text {
    height: 3px;
    width: 70%;
    border-radius: 1px;

    &--short {
      width: 50%;
    }
  }

  &__preview-chat {
    flex: 1;
    padding: 3px;
    display: flex;
    flex-direction: column;
    gap: 3px;
  }

  &__preview-message {
    padding: 3px;
    border-radius: 2px;
    border: 1px solid;

    &--user {
      margin-left: 15%;
    }

    &--ai {
      margin-right: 10%;
    }
  }

  &__preview-line {
    height: 2px;
    width: 80%;
    border-radius: 1px;
    margin-bottom: 2px;

    &:last-child {
      margin-bottom: 0;
    }

    &--short {
      width: 50%;
    }
  }

  &__preview-editor {
    width: 25%;
    display: flex;
    flex-direction: column;
    border-left: 1px solid;
  }

  &__preview-tabs {
    height: 10px;
    display: flex;
    gap: 2px;
    padding: 2px;
    border-bottom: 1px solid;
  }

  &__preview-tab {
    width: 18px;
    height: 6px;
    border-radius: 2px 2px 0 0;

    &--active {
      border-bottom: 1px solid;
    }
  }

  &__preview-code {
    flex: 1;
    padding: 3px;
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  &__preview-code-line {
    display: flex;
    align-items: center;
    gap: 3px;
  }

  &__preview-line-num {
    width: 6px;
    height: 2px;
    border-radius: 1px;
    flex-shrink: 0;
  }

  &__preview-line-code {
    height: 2px;
    border-radius: 1px;
  }

  &__preview-statusbar {
    height: 10px;
    display: flex;
    align-items: center;
    gap: 3px;
    padding: 0 4px;
    border-top: 1px solid;
    flex-shrink: 0;
  }

  &__preview-status-dot {
    width: 4px;
    height: 4px;
    border-radius: 50%;
  }

  &__preview-status-text {
    width: 20px;
    height: 2px;
    border-radius: 1px;
  }

  // Fallback preview styles
  &__preview--fallback {
    height: 100px;
    background: var(--element-bg-subtle);
    border-radius: $size-radius-base;
  }

  &__name {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: var(--color-text-primary);
    margin-bottom: $size-gap-1;
  }

  &__desc {
    font-size: $font-size-xs;
    color: var(--color-text-muted);
    line-height: 1.4;
  }
}

// ==================== Mode intro styles (minimal, premium) ====================
.bitfun-onboarding-modes {
  &__grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: $size-gap-4;
    margin-top: $size-gap-6;
    width: 100%;
    max-width: 640px;
  }

  &__item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: $size-gap-5 $size-gap-4;
    border: 1px dashed var(--border-medium);
    border-radius: $size-radius-lg;
    background: transparent;
    transition: all $motion-base $easing-standard;

    &:hover {
      border-style: solid;
      background: var(--element-bg-subtle);
      transform: translateY(-2px);
    }
  }

  &__item-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    margin-bottom: $size-gap-3;
    border-radius: 50%;
    background: var(--element-bg-base);
    color: $color-accent-500;
    transition: transform $motion-base $easing-standard;

    .bitfun-onboarding-modes__item:hover & {
      transform: scale(1.1);
    }
  }

  &__item-name {
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    color: var(--color-text-primary);
    margin-bottom: $size-gap-2;
  }

  &__item-desc {
    font-size: $font-size-xs;
    color: var(--color-text-muted);
    line-height: 1.5;
    margin-bottom: $size-gap-3;
  }

  &__item-features {
    display: flex;
    flex-direction: column;
    gap: $size-gap-1;
  }

  &__item-feature {
    font-size: 11px;
    color: var(--color-text-secondary);
    opacity: 0.8;
  }

  &__tip {
    margin-top: $size-gap-6;
    font-size: $font-size-sm;
    color: var(--color-text-muted);
    text-align: center;
  }
}

// ==================== Model configuration styles ====================
.bitfun-onboarding-model {
  &__form {
    display: flex;
    flex-direction: column;
    gap: $size-gap-4;
    margin-top: $size-gap-6;
    width: 100%;
    max-width: 480px;
    text-align: left;
  }

  &__field {
    display: flex;
    flex-direction: column;
    gap: $size-gap-2;

    // Adapt component library Select for onboarding (class is .select, not .bitfun-select)
    .select {
      width: 100%;

      .select__label {
        font-size: $font-size-sm;
        font-weight: $font-weight-medium;
        color: var(--color-text-primary);
        margin-bottom: $size-gap-2;
      }

      .select__trigger {
        min-height: 40px;
        padding: 8px 12px;
        border: 1px solid var(--border-base, rgba(255, 255, 255, 0.08));
        border-radius: var(--size-radius-base, 8px);
        background: var(--element-bg-subtle, rgba(255, 255, 255, 0.04));

        &:hover:not(.select--disabled &) {
          border-color: var(--border-medium, rgba(255, 255, 255, 0.15));
          background: var(--glass-blue-subtle, rgba(96, 165, 250, 0.05));
        }
      }

      &.select--open .select__trigger {
        border-color: var(--color-accent-500, #60a5fa);
        background: var(--element-bg-soft, rgba(255, 255, 255, 0.06));
        box-shadow: 0 0 0 3px var(--color-accent-200, rgba(96, 165, 250, 0.15));
      }

      // Dropdown - tighter corners
      .select__dropdown {
        border-radius: var(--size-radius-base, 8px);
        margin-top: 4px;
      }

      // Options list - tighter padding
      .select__options {
        padding: 4px;
      }

      // Option item - tighter gap and padding
      .select__option {
        padding: 6px 10px;
        gap: 8px;
        font-size: $font-size-sm;
        border-radius: var(--size-radius-sm, 6px);
      }

      .select__option-content {
        gap: 8px;
      }
    }
  }

  &__label {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: var(--color-text-primary);
  }

  // Inputs - match Select sizing
  &__input {
    width: 100%;
    min-height: 40px;
    padding: 8px 12px;
    border: 1px solid var(--border-base, rgba(255, 255, 255, 0.08));
    border-radius: var(--size-radius-base, 8px);
    background: var(--element-bg-subtle, rgba(255, 255, 255, 0.04));
    color: var(--color-text-primary);
    font-size: $font-size-sm;
    font-family: $font-family-sans;
    box-sizing: border-box;
    transition: all $motion-base $easing-standard;

    &::placeholder {
      color: var(--color-text-muted);
    }

    &:hover {
      border-color: var(--border-medium, rgba(255, 255, 255, 0.15));
      background: var(--glass-blue-subtle, rgba(96, 165, 250, 0.05));
    }

    &:focus {
      outline: none;
      border-color: var(--color-accent-500, #60a5fa);
      background: var(--element-bg-soft, rgba(255, 255, 255, 0.06));
      box-shadow: 0 0 0 3px var(--color-accent-200, rgba(96, 165, 250, 0.15));
    }
  }

  &__help {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: $font-size-xs;
    color: $color-accent-500;
    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;
    font-family: inherit;

    &:hover {
      text-decoration: underline;
    }

    svg {
      flex-shrink: 0;
    }
  }

  &__hint {
    font-size: $font-size-xs;
    color: var(--color-text-muted);
    line-height: 1.4;

    &--success {
      color: $color-success;
    }

    &--error {
      color: $color-error;
    }
  }

  &__save-hint {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: $font-size-sm;
    line-height: 1.4;
    color: var(--color-warning, #e8a838);
    background: rgba(232, 168, 56, 0.08);
    border: 1px solid rgba(232, 168, 56, 0.2);

    svg {
      flex-shrink: 0;
    }
  }

  &__advanced {
    margin-top: $size-gap-2;
    border-top: 1px solid var(--border-base, rgba(255, 255, 255, 0.06));
    padding-top: $size-gap-2;
  }

  &__advanced-toggle {
    display: flex;
    align-items: center;
    gap: $size-gap-2;
    width: 100%;
    padding: $size-gap-2 0;
    background: transparent;
    border: none;
    color: var(--color-text-secondary);
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    font-family: $font-family-sans;
    cursor: pointer;
    transition: color $motion-base $easing-standard;

    &:hover {
      color: var(--color-text-primary);
    }

    svg {
      flex-shrink: 0;
    }
  }

  &__advanced-content {
    display: flex;
    flex-direction: column;
    gap: $size-gap-4;
    padding-top: $size-gap-2;
    animation: onboarding-fade-in 0.2s ease-out;
  }

  &__switch-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: $size-gap-4;

    > div:first-child {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
  }

  &__warning {
    display: flex;
    align-items: center;
    gap: $size-gap-2;
    padding: $size-gap-2 $size-gap-3;
    border-radius: $size-radius-sm;
    background: rgba(234, 179, 8, 0.08);
    color: var(--color-warning, #eab308);
    font-size: $font-size-xs;
    line-height: 1.4;

    svg {
      flex-shrink: 0;
    }
  }

  &__textarea {
    width: 100%;
    min-height: 80px;
    padding: 8px 12px;
    border: 1px solid var(--border-base, rgba(255, 255, 255, 0.08));
    border-radius: var(--size-radius-base, 8px);
    background: var(--element-bg-subtle, rgba(255, 255, 255, 0.04));
    color: var(--color-text-primary);
    font-size: $font-size-xs;
    font-family: monospace;
    line-height: 1.5;
    box-sizing: border-box;
    resize: vertical;
    transition: all $motion-base $easing-standard;

    &::placeholder {
      color: var(--color-text-muted);
    }

    &:hover {
      border-color: var(--border-medium, rgba(255, 255, 255, 0.15));
      background: var(--glass-blue-subtle, rgba(96, 165, 250, 0.05));
    }

    &:focus {
      outline: none;
      border-color: var(--color-accent-500, #60a5fa);
      background: var(--element-bg-soft, rgba(255, 255, 255, 0.06));
      box-shadow: 0 0 0 3px var(--color-accent-200, rgba(96, 165, 250, 0.15));
    }
  }

  &__error {
    padding: $size-gap-2 $size-gap-3;
    border-radius: $size-radius-base;
    background: var(--color-error-bg);
    border: 1px solid var(--color-error-border);
    color: var(--color-error);
    font-size: $font-size-sm;
    text-align: left;
    white-space: pre-line;
    word-break: break-word;
  }

  &__actions {
    display: flex;
    gap: $size-gap-3;
    margin-top: $size-gap-2;
  }

  &__test-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $size-gap-2;
    min-height: 40px;
    padding: 8px 12px;
    border: 1px dashed var(--border-medium);
    border-radius: var(--size-radius-base, 8px);
    background: transparent;
    color: var(--color-text-secondary);
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    font-family: $font-family-sans;
    cursor: pointer;
    box-sizing: border-box;
    transition: all $motion-base $easing-standard;

    &:hover:not(:disabled) {
      border-style: solid;
      background: var(--element-bg-subtle);
      color: var(--color-text-primary);
    }

    &:disabled {
      opacity: 0.5;
      cursor: default;
    }

    &--success {
      border-style: solid;
      border-color: $color-success;
      color: $color-success;
    }

    &--error {
      border-style: solid;
      border-color: $color-error;
      color: $color-error;
    }
  }

  &__skip-link {
    margin-top: $size-gap-4;
    background: transparent;
    border: none;
    color: var(--color-text-muted);
    font-size: $font-size-sm;
    cursor: pointer;
    text-align: center;

    &:hover {
      color: var(--color-text-secondary);
      text-decoration: underline;
    }
  }
}

// ==================== Completion step styles ====================
.bitfun-onboarding-completion {
  &__success-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 80px;
    height: 80px;
    margin: 0 auto $size-gap-4;
    border-radius: 50%;
    background: $color-success-bg;
    color: $color-success;
    animation: onboarding-success-pop 0.5s ease-out;

    svg {
      width: 40px;
      height: 40px;
    }
  }

  &__model-status {
    display: flex;
    align-items: center;
    gap: $size-gap-2;
    margin-top: $size-gap-6;
    padding: $size-gap-3 $size-gap-4;
    border-radius: $size-radius-lg;
    font-size: $font-size-sm;
    width: 100%;
    max-width: 400px;
    text-align: center;
    justify-content: center;

    &--configured {
      border: 1px dashed var(--border-medium);
      background: transparent;
      color: var(--color-text-primary);
    }

    &--not-configured {
      border: 1px dashed $color-warning;
      background: transparent;
      color: $color-warning;
    }
  }

  &__model-status-label {
    color: var(--color-text-muted);
  }

  &__model-status-value {
    font-weight: $font-weight-medium;
    color: var(--color-text-primary);
  }

  &__start-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $size-gap-2;
    margin-top: $size-gap-6;
    padding: $size-gap-3 $size-gap-6;
    border: 1px dashed var(--border-medium);
    border-radius: $size-radius-base;
    background: transparent;
    color: var(--color-text-secondary);
    font-size: $font-size-base;
    font-weight: $font-weight-medium;
    font-family: $font-family-sans;
    cursor: pointer;
    transition: all $motion-base $easing-standard;

    &:hover {
      border-style: solid;
      border-color: var(--color-text-primary);
      background: var(--element-bg-subtle);
      color: var(--color-text-primary);
      transform: translateY(-2px);
    }

    &:active {
      transform: translateY(0);
    }

    svg {
      transition: transform $motion-base $easing-standard;
    }

    &:hover svg {
      transform: translateX(4px);
    }
  }
}

// ==================== Inline confirm dialog ====================
.bitfun-onboarding__confirm-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.5);
  animation: onboarding-fade-in 0.2s ease-out;
}

.bitfun-onboarding__confirm-dialog {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  max-width: 420px;
  padding: $size-gap-6 $size-gap-8;
  border: 1px solid var(--border-medium);
  border-radius: $size-radius-lg;
  background: var(--color-bg-primary);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.bitfun-onboarding__confirm-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 56px;
  height: 56px;
  margin-bottom: $size-gap-4;
  border-radius: 50%;
  background: rgba(234, 179, 8, 0.1);
  color: var(--color-warning, #eab308);
}

.bitfun-onboarding__confirm-title {
  font-size: $font-size-lg;
  font-weight: $font-weight-semibold;
  color: var(--color-text-primary);
  margin: 0 0 $size-gap-2 0;
}

.bitfun-onboarding__confirm-message {
  font-size: $font-size-sm;
  color: var(--color-text-secondary);
  margin: 0 0 $size-gap-6 0;
  line-height: 1.6;
}

.bitfun-onboarding__confirm-actions {
  display: flex;
  gap: $size-gap-3;
  width: 100%;
}

.bitfun-onboarding__confirm-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 40px;
  padding: 8px 16px;
  border: 1px dashed var(--border-medium);
  border-radius: var(--size-radius-base, 8px);
  background: transparent;
  color: var(--color-text-secondary);
  font-size: $font-size-sm;
  font-weight: $font-weight-medium;
  font-family: $font-family-sans;
  cursor: pointer;
  transition: all $motion-base $easing-standard;

  &:hover {
    border-style: solid;
    border-color: var(--color-text-secondary);
    background: var(--element-bg-subtle);
    color: var(--color-text-primary);
  }

  &--primary {
    border-color: $color-accent-500;
    border-style: solid;
    background: $color-accent-100;
    color: $color-accent-500;

    &:hover {
      background: $color-accent-200;
      border-color: $color-accent-600;
      color: $color-accent-600;
    }
  }
}

// ==================== Animations ====================
@keyframes onboarding-fade-in {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes onboarding-float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes onboarding-success-pop {
  0% {
    opacity: 0;
    transform: scale(0.5);
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}
