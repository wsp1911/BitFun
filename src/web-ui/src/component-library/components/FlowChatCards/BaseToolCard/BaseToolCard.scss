/**
 * Base tool card styles
 */
@use '../../../styles/tokens.scss' as tokens;
@use '../shared-styles' as shared;

.base-tool-card {
  --primary-color: #{tokens.$color-accent-600};

  @include shared.liquid-card-base;
  @include shared.card-light-flow;


  &--pending {
    @include shared.status-indicator(107, 114, 128, 0.6);
  }

  &--running,
  &--streaming {
    @include shared.status-indicator(96, 165, 250, 0.9);
  }

  &--completed {
    @include shared.status-indicator(52, 211, 153, 0.9);
  }

  &--cancelled {
    @include shared.status-indicator(156, 163, 175, 0.7);
  }

  &--error {
    @include shared.status-indicator(239, 68, 68, 0.9);
  }


  &--compact {
    padding: tokens.$size-gap-3 tokens.$size-gap-4;
    border-radius: tokens.$size-radius-base;

    .base-tool-card__compact-content {
      display: flex;
      align-items: center;
      gap: tokens.$size-gap-3;
      font-size: tokens.$font-size-sm;
      position: relative;
      z-index: 2;

      .base-tool-card__icon,
      .base-tool-card__icon-emoji {
        min-width: 20px;
        min-height: 20px;
        font-size: 16px;
        padding: 2px;
        background: transparent;
        border: none;

        svg {
          color: tokens.$color-accent-500;
        }
      }
    }

    @include shared.compact-hover;
  }


  &--standard,
  &--detailed {
    padding: tokens.$size-gap-4;

    @include shared.standard-hover;
  }


  &__header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: tokens.$size-gap-3;
    position: relative;
    z-index: 2;
  }

  &__info {
    display: flex;
    align-items: flex-start;
    gap: tokens.$size-gap-3;
    flex: 1;
    min-width: 0;
  }

  &__icon,
  &__icon-emoji {
    @include shared.liquid-icon;
  }

  &__details {
    flex: 1;
    min-width: 0;
  }

  &__name {
    font-size: tokens.$font-size-sm;
    font-weight: tokens.$font-weight-semibold;
    color: tokens.$color-text-primary;
    margin-bottom: 2px;
    letter-spacing: -0.01em;
  }

  &__description {
    font-size: tokens.$font-size-xs;
    color: tokens.$color-text-muted;
    line-height: 1.4;
  }

  &__action {
    font-weight: tokens.$font-weight-medium;
    color: tokens.$color-text-secondary;
  }


  &__status-container {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 11px;
    color: tokens.$color-text-muted;
    padding: 2px 6px;
    background: tokens.$element-bg-subtle;
    border-radius: tokens.$size-radius-sm;
    border: 1px solid tokens.$border-base;
  }

  &__status-icon {
    display: flex;
    align-items: center;
  }

  &__status-spinner {
    animation: spin 1s linear infinite;
    color: tokens.$color-accent-500;
  }

  &__status-success {
    color: tokens.$color-success;
  }

  &__status-cancelled {
    color: tokens.$color-text-muted;
  }

  &__status-error {
    color: tokens.$color-error;
  }

  &__status-pending {
    color: tokens.$color-text-muted;
  }

  &__status {
    display: flex;
    align-items: center;
  }


  &__content {
    margin-bottom: tokens.$size-gap-3;
    position: relative;
    z-index: 2;
  }


  &__input {
    margin-bottom: tokens.$size-gap-4;
  }

  &__input-label {
    font-size: tokens.$font-size-xs;
    font-weight: tokens.$font-weight-semibold;
    color: tokens.$color-text-secondary;
    margin-bottom: tokens.$size-gap-2;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  &__input-content {
    background: tokens.$color-bg-elevated;
    border: 1px solid tokens.$border-base;
    border-radius: tokens.$size-radius-base;
    padding: tokens.$size-gap-3;
    overflow-x: auto;
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);

    pre {
      margin: 0;
      font-size: tokens.$font-size-xs;
      color: tokens.$color-text-secondary;
      font-family: tokens.$font-family-mono;
      line-height: 1.5;
    }
  }


  &__actions {
    display: flex;
    gap: tokens.$size-gap-2;
    margin-top: tokens.$size-gap-4;
    position: relative;
    z-index: 2;
  }

  &__button {
    @include shared.liquid-button('default');

    &--confirm {
      @include shared.liquid-button('success');
    }

    &--reject {
      @include shared.liquid-button('error');
    }

    &--expand {
      @include shared.liquid-button('primary');
    }
  }


  &__result {
    margin-top: tokens.$size-gap-4;
  }

  &__result-label {
    font-size: tokens.$font-size-xs;
    font-weight: tokens.$font-weight-semibold;
    color: tokens.$color-text-secondary;
    margin-bottom: tokens.$size-gap-2;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  &__result-content {
    background: tokens.$color-bg-elevated;
    border: 1px solid tokens.$border-base;
    border-radius: tokens.$size-radius-base;
    padding: tokens.$size-gap-3;
    overflow-x: auto;
    max-height: 300px;
    overflow-y: auto;
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);

    pre {
      margin: 0;
      font-size: tokens.$font-size-xs;
      color: tokens.$color-text-secondary;
      font-family: tokens.$font-family-mono;
      line-height: 1.5;
    }

  }


  &__error {
    display: flex;
    align-items: flex-start;
    gap: tokens.$size-gap-3;
    padding: tokens.$size-gap-4;
    background: linear-gradient(135deg,
      rgba(239, 68, 68, 0.08) 0%,
      rgba(220, 38, 38, 0.06) 100%);
    border: 1px solid tokens.$color-error-border;
    border-radius: tokens.$size-radius-base;
    margin-top: tokens.$size-gap-4;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  &__error-icon {
    color: tokens.$color-error;
    flex-shrink: 0;
    margin-top: 2px;
  }

  &__error-message {
    font-size: tokens.$font-size-sm;
    color: tokens.$color-text-secondary;
    line-height: tokens.$line-height-base;
    flex: 1;
  }
}


@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}
