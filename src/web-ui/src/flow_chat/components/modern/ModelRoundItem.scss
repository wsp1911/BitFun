/* Model round item styles (BEM). */

.model-round-item {
  margin-bottom: 0.5rem;
  padding: 0 3rem;
  animation: fadeIn 0.4s ease;
  position: relative;

  // Streaming state
  &--streaming {
    opacity: 1;
    margin-bottom: 0;
  }

  // Complete state
  &--complete {
    opacity: 1;
  }

  // Reduce spacing when compact tool cards are present.
  &:has(.compact-tool-card) {
    margin-bottom: 0.001rem;
  }

  @media (max-width: 768px) {
    padding: 0 1.5rem;
  }
}

.model-round-item__header {
  display: flex;
  justify-content: flex-end;
  margin-bottom: 0.5rem;
  padding: 0 0.5rem;
}

// Action button container (bottom-right of last round).
.model-round-item__footer {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 0.5rem;
  padding: 0.5rem 0;
  margin-top: 0.5rem;
}

.model-round-item__feedback-group {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding-left: 0.5rem;
  border-left: 1px solid rgba(255, 255, 255, 0.1);
}

.model-round-item__action-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  padding: 0;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: var(--color-text-muted, #999);
  cursor: pointer;
  transition: all 0.2s ease;
  opacity: 1;
  
  &:hover {
    background: rgba(255, 255, 255, 0.08);
    color: var(--color-text-primary, #fff);
  }

  &:active {
    transform: scale(0.95);
  }

  svg {
    width: 14px;
    height: 14px;
    flex-shrink: 0;
  }
}

// Copy button
.model-round-item__copy-btn {
  &.copied {
    color: #22c55e;
    background: rgba(34, 197, 94, 0.1);
  }
}

// Export image button
.model-round-item__export-btn {
  .spinning {
    animation: spin 1s linear infinite;
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

// Feedback buttons
.model-round-item__feedback-btn {
  &:hover:has(svg[data-lucide="thumbs-up"]) {
    color: #22c55e;
  }

  &:hover:has(svg[data-lucide="thumbs-down"]) {
    color: #ef4444;
  }

  &:hover:has(svg[data-lucide="alert-triangle"]) {
    color: #f59e0b;
  }
}


@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// ==================== Explore region adjustments ====================

// Reduce spacing when only a collapsed explore region is present.
.model-round-item:has(.explore-region--collapsed):not(:has(.explore-region--expanded)):not(:has(.base-tool-card)):not(:has(.flow-text-block)) {
  margin-bottom: 0;
}

// Reduce spacing between consecutive collapsed explore regions.
.model-round-item:has(.explore-region--collapsed) + .model-round-item:has(.explore-region--collapsed) {
  margin-top: -4px;
}
